<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">

<link rel="import" href="../bower_components/polymer-fontawesome/polymer-fontawesome.html">
<link rel="import" href="../bower_components/sortable-table/sortable-table.html">


<link rel="import" href="../lib/jsorolla/src/lib/components/opencga/jso-header.html">

<link rel="import" href="es-filter-form-element.html">
<link rel="import" href="form-components/es-position-form-element.html">
<link rel="import" href="form-components/es-studies-form-element.html">

<link rel="import" href="es-data-grid-element.html">

<polymer-element name="exome-server-element" attributes="urlPrefix">
    <template>
        <link rel="stylesheet" href="../lib/jsorolla/src/lib/components/jso-style.css">
        <style>
            :host {
                display: block;
                position: relative;
                height: 100vh;
                background-color: #314559;

                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                cursor: default;

                font-size: 13px;
            }

            #es-container {
                position: relative;
                /*top: 60px; *//* header height */
                /*bottom: 0;*/
                /*left: 0;*/
                /*right: 0;*/
                height: calc(100vh - 60px);
            }

        </style>
        <jso-header appTitle="Exome Server" description="beta desc." allowLogin="false"></jso-header>

        <core-ajax
                auto
                url= "http://aaleman:8080/exomeserver/rest/studies/list"
                handleAs="json"
                on-core-response="{{getStudies}}"></core-ajax>

        <div id="es-container" horizontal layout>
            <es-filter-form-element style="width: 200px">

                <es-position-form-element></es-position-form-element>
                <es-studies-form-element studies="{{ studies }}"></es-studies-form-element>

            </es-filter-form-element>
            <es-data-grid-element flex></es-data-grid-element>
        </div>

    </template>
    <script>
        Polymer({
            created: function () {
                this.selectedOption = 'home';
                this.selectedMenu = '';
                this.userData;

                this.selectedProject;
                this.selectedStudy;

                this.studies = [];


            },
            ready: function () {

                var url = this.urlPrefix + "/studies/list";
                console.log(url);
            },
            getStudies: function (event, response) {
//                debugger
                this.studies = response.response.response[0].result;
                console.log(this.studies);
            }
        });
    </script>
</polymer-element>
